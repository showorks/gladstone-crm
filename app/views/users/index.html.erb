<% @page_title = 'Users' %>

<h1><%= @page_title %></h1>

<table class="table-condensed table-striped table-hover table-condensed table-responsive table-bordered">
  <thead>
  <tr>
    <th>Email</th>
    <th>Role</th>
    <th>Current Sign In At</th>
    <th>Current Sign In IP</th>
    <th colspan="2"></th>
  </tr>
  </thead>
  <tbody>
  <% @users.each do |user| %>
    <tr>
      <td><%=h user.email %></td>
      <td><%= user.role.capitalize %></td>
      <td><%= l user.current_sign_in_at if user.current_sign_in_at.present? %></td>
      <td><%= user.current_sign_in_ip %></td>
      <td><%= link_to('Edit', edit_user_path(user)) if can? :update, user  %></td>
      <td><%= user == current_user ? "Delete" : link_to('Delete', user, :method => 'delete', :data => {:confirm => 'Are you sure you want to delete this user?'}) %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<p>
  <br>
  <%= link_to "New User", new_user_path, class: "btn btn-primary" %>
</p>
